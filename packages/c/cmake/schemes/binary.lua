function add_urls(package, scheme_name)
    local scheme = package
    if scheme_name then
        scheme = package:scheme(scheme_name)
    end

    if is_host("macosx") then
        scheme:add("urls", "https://cmake.org/files/v$(version).tar.gz", {version = function (version)
                return table.concat(table.slice((version):split('%.'), 1, 2), '.') .. "/cmake-" .. version .. (version:ge("3.20") and "-macos-universal" or "-Darwin-x86_64")
            end})
        scheme:add("urls", "https://github.com/Kitware/CMake/releases/download/v$(version).tar.gz", {version = function (version)
                return version .. "/cmake-" .. version .. (version:ge("3.20") and "-macos-universal" or "-Darwin-x86_64")
            end})
        scheme:add("versions", "3.11.4", "2b5eb705f036b1906a5e0bce996e9cd56d43d73bdee8318ece3e5ce31657b812")
        scheme:add("versions", "3.15.4", "adfbf611d21daa83b9bf6d85ab06a455e481b63a38d6e1270d563b03d4e5f829")
        scheme:add("versions", "3.18.4", "9d27049660474cf134ab46fa0e0db771b263313fcb8ba82ee8b2d1a1a62f8f20")
        scheme:add("versions", "3.21.0", "c1c6f19dfc9c658a48b5aed22806595b2337bb3aedb71ab826552f74f568719f")
        scheme:add("versions", "3.22.1", "9ba46ce69d524f5bcdf98076a6b01f727604fb31cf9005ec03dea1cf16da9514")
        scheme:add("versions", "3.24.1", "71bb8db69826d74c395a3c3bbf8b773dbe9f54a2c7331266ba70da303e9c97a1")
        scheme:add("versions", "3.24.2", "efb11a78c064dd7c54a50b8da247254d252112c402c6e48cb7db3f9c84a4e5ad")
        scheme:add("versions", "3.26.4", "5417fb979c1f82aaffe4420112e2c84562c024b6683161afb520c9e378161340")
        scheme:add("versions", "3.28.1", "0e0942bb5ed7ee1aeda0c00b3cb7738f2590865f1d69fe1d5212cbc26fc040a5")
        scheme:add("versions", "3.28.3", "d9e2c22fec920a4d1f6b0d0683c035d799475c179c91e41e1a7fbfab610a0305")
        scheme:add("versions", "3.29.2", "0d670b59dddd064d24cf8c386abf3590bda2642bb169e11534cf1e3d1ae3a76a")
        scheme:add("versions", "3.30.1", "51e12618829b811bba6f033ee8f39f6192da1b6abb20d82a7899d5134e879a4c")
        scheme:add("versions", "3.30.2", "c6fdda745f9ce69bca048e91955c7d043ba905d6388a62e0ff52b681ac17183c")
        scheme:add("versions", "4.0.0",  "a7d66b55c673845e21b5541340417bae4823958393a59f4b644c26d433b19a0b")
        scheme:add("versions", "4.0.1",  "5bb98e3096f0efe159bd862c2f293a43b5ebee6c0646bbc5fe7244cf2fc1c261")
        scheme:add("versions", "4.0.2",  "4c53ba41092617d1be2205dbc10bb5873a4c5ef5e9e399fc927ffbe78668a6d3")
        scheme:add("versions", "4.0.3",  "4e85de4daf1c3e82d7dc6b8ba5683972944b466343aeb9c327a742437bb3ce9a")
        scheme:add("versions", "4.1.4",  "7fc64e989af34201acff6d16628d6a8d1f72cfb74d5bd9342ab332c8c00e69ab")
        scheme:add("versions", "4.2.1",  "0bb18f295e52d7e9309980e361e79e76a1d8da67a1587255cbe3696ea998f597")
        return true
    elseif is_host("linux") and linuxos.name() ~= "alpine" then
        if os.arch():find("arm64.*") then
            scheme:add("urls", "https://cmake.org/files/v$(version)-aarch64.tar.gz", {version = function (version)
                    return table.concat(table.slice((version):split('%.'), 1, 2), '.') .. "/cmake-" .. version .. (version:ge("3.20") and "-linux" or "-Linux")
                end})
            scheme:add("urls", "https://github.com/Kitware/CMake/releases/download/v$(version)-aarch64.tar.gz", {version = function (version)
                return version .. "/cmake-" .. version .. (version:ge("3.20") and "-linux" or "-Linux")
                end})
            scheme:add("versions", "3.24.2", "5f1c0d49bac89915b5c68811c2430e5de6c8e606785b9f2919eabee86c2f12b4")
            scheme:add("versions", "3.26.4", "1c9843c92f40bee1a16baa12871693d3e190c9a222259a89e406d4d9aae6cf74")
            scheme:add("versions", "3.28.1", "e84d88e46ed8c85fbe259bcd4ca07df7a928df87e84013e0da34d91b01a25d71")
            scheme:add("versions", "3.28.3", "bbf023139f944cefe731d944f2864d8ea3ea0c4f9310b46ac72b3cb4e314b023")
            scheme:add("versions", "3.29.2", "ca883c6dc3ce9eebd833804f0f940ecbbff603520cfd169ee58916dbbc23c2b8")
            scheme:add("versions", "3.30.1", "ad234996f8750f11d7bd0d17b03f55c434816adf1f1671aab9e8bab21a43286a")
            scheme:add("versions", "3.30.2", "d18f50f01b001303d21f53c6c16ff12ee3aa45df5da1899c2fe95be7426aa026")
            scheme:add("versions", "4.0.0",  "3727d7a6ca900331447a55c08404cc11248b2e8d2709a6b3ed85b01189bb16af")
            scheme:add("versions", "4.0.1",  "e4549bc77be50c4dacac18602befe0ec5cfc19444dbc64e16256f5ae98f7b63e")
            scheme:add("versions", "4.0.2",  "7a88303641c85ce1af09dfc4ffc201520bc7061f71ceafbf59680fc42af7d553")
            scheme:add("versions", "4.0.3",  "391da1544ef50ac31300841caaf11db4de3976cdc4468643272e44b3f4644713")
            scheme:add("versions", "4.1.4",  "efe4dfc830fbf4d897af8e210f5a0632ad2b93c015a37c9305d40a57b0e4c538")
            scheme:add("versions", "4.2.1",  "3e178207a2c42af4cd4883127f8800b6faf99f3f5187dccc68bfb2cc7808f5f7")
            return true
        else
            scheme:add("urls", "https://cmake.org/files/v$(version)-x86_64.tar.gz", {version = function (version)
                    return table.concat(table.slice((version):split('%.'), 1, 2), '.') .. "/cmake-" .. version .. (version:ge("3.20") and "-linux" or "-Linux")
                end})
            scheme:add("urls", "https://github.com/Kitware/CMake/releases/download/v$(version)-x86_64.tar.gz", {version = function (version)
                return version .. "/cmake-" .. version .. (version:ge("3.20") and "-linux" or "-Linux")
                end})
            scheme:add("versions", "3.11.4", "6dab016a6b82082b8bcd0f4d1e53418d6372015dd983d29367b9153f1a376435")
            scheme:add("versions", "3.15.4", "7c2b17a9be605f523d71b99cc2e5b55b009d82cf9577efb50d4b23056dee1109")
            scheme:add("versions", "3.18.4", "149e0cee002e59e0bb84543cf3cb099f108c08390392605e944daeb6594cbc29")
            scheme:add("versions", "3.21.0", "d54ef6909f519740bc85cec07ff54574cd1e061f9f17357d9ace69f61c6291ce")
            scheme:add("versions", "3.22.1", "73565c72355c6652e9db149249af36bcab44d9d478c5546fd926e69ad6b43640")
            scheme:add("versions", "3.24.1", "827bf068cfaa23a9fb95f990c9f8a7ed8f2caeb3af62b5c0a2fed7a8dd6dde3e")
            scheme:add("versions", "3.24.2", "71a776b6a08135092b5beb00a603b60ca39f8231c01a0356e205e0b4631747d9")
            scheme:add("versions", "3.26.4", "ba1e0dcc710e2f92be6263f9617510b3660fa9dc409ad2fb8190299563f952a0")
            scheme:add("versions", "3.28.1", "f76398c24362ad87bad1a3d6f1e8f4377632b5b1c360c4ba1fd7cd205fd9d8d4")
            scheme:add("versions", "3.28.3", "804d231460ab3c8b556a42d2660af4ac7a0e21c98a7f8ee3318a74b4a9a187a6")
            scheme:add("versions", "3.29.2", "0416c70cf88e8f92efcbfe292e181bc09ead7d70e29ab37b697522c01121eab5")
            scheme:add("versions", "3.30.1", "ac31f077ef3378641fa25a3cb980d21b2f083982d3149a8f2eb9154f2b53696b")
            scheme:add("versions", "3.30.2", "cdd7fb352605cee3ae53b0e18b5929b642900e33d6b0173e19f6d4f2067ebf16")
            scheme:add("versions", "4.0.0",  "a06e6e32da747e569162bc0442a3fd400fadd9db7d4f185c9e4464ab299a294b")
            scheme:add("versions", "4.0.1",  "d66c11c010588c8256ee20a26b45977cd5b2f4aee2b742d4b8a353769940d147")
            scheme:add("versions", "4.0.2",  "80940e81de61584fe4eedd3c40adc597d7c5b76ad8709668007b467a3c2a36c7")
            scheme:add("versions", "4.0.3",  "585ae9e013107bc8e7c7c9ce872cbdcbdff569e675b07ef57aacfb88c886faac")
            scheme:add("versions", "4.1.4",  "af5c72ce7ce61607d70ff80445130f6278204aa46c45127edc0dc36e26a687b2")
            scheme:add("versions", "4.2.1",  "c059bff1e97a2b6b5b0c0872263627486345ad0ed083298cb21cff2eda883980")
            return true
        end
    elseif is_host("windows") then
        if os.arch() == "x64" then
            scheme:add("urls", "https://cmake.org/files/v$(version).zip", {excludes = {"*/doc/*"}, version = function (version)
                    return table.concat(table.slice((version):split('%.'), 1, 2), '.') .. "/cmake-" .. version .. (version:ge("3.20") and "-windows-x86_64" or "-win64-x64")
                end})
            scheme:add("urls", "https://github.com/Kitware/CMake/releases/download/v$(version).zip", {excludes = {"*/doc/*"}, version = function (version)
                    return version .. "/cmake-" .. version .. (version:ge("3.20") and "-windows-x86_64" or "-win64-x64")
                end})
            scheme:add("versions", "3.11.4", "d3102abd0ded446c898252b58857871ee170312d8e7fd5cbff01fbcb1068a6e5")
            scheme:add("versions", "3.15.4", "5bb49c0274800c38833e515a01af75a7341db68ea82c71856bb3cf171d2068be")
            scheme:add("versions", "3.18.4", "a932bc0c8ee79f1003204466c525b38a840424d4ae29f9e5fb88959116f2407d")
            scheme:add("versions", "3.21.0", "c7b88c907a753f4ec86e43ddc89f91f70bf1b011859142f7f29e6d51ea4abb3c")
            scheme:add("versions", "3.22.1", "35fbbb7d9ffa491834bbc79cdfefc6c360088a3c9bf55c29d111a5afa04cdca3")
            scheme:add("versions", "3.24.1", "c1b17431a16337d517f7ba78c7067b6f143a12686cb8087f3dd32f3fa45f5aae")
            scheme:add("versions", "3.24.2", "6af30354eecbb7113b0f0142d13c03d21abbc9f4dbdcddaf88df1f9ca1bc4d6f")
            scheme:add("versions", "3.26.4", "62c35427104a4f8205226f72708d71334bd36a72cf72c60d0e3a766d71dcc78a")
            scheme:add("versions", "3.28.1", "671332249bc7cc7424523d6c2b5edd3e3de90a43b8b82e8782f42da4fe4c562d")
            scheme:add("versions", "3.28.3", "cac7916f7e1e73a25de857704c94fd5b72ba9fe2f055356b5602d2f960e50e5b")
            scheme:add("versions", "3.29.2", "86b5de51f60a0e9d62be4d8ca76ea467d154083d356fcc9af1409606be341cd8")
            scheme:add("versions", "3.30.1", "cf7788ff9d92812da194847d4ec874fc576f34079987d0f20c96cd09e2a16220")
            scheme:add("versions", "3.30.2", "48bf4b3dc2d668c578e0884cac7878e146b036ca6b5ce4f8b5572f861b004c25")
            scheme:add("versions", "4.0.0",  "89e87f3e297b70f1349ee7c5f90783ca96efb986b70c558c799c3c9b1b716456")
            scheme:add("versions", "4.0.1",  "31742b9a264b36897e0c904ab3520baf00a5b5ac5bc801aeede28d0d217eec65")
            scheme:add("versions", "4.0.2",  "109ec7de10416d6d78991bab9714d2cb1ccb71d1b436dff42ec978dd283c29fc")
            scheme:add("versions", "4.0.3",  "b59a31dfbfa376a4aaea9ff560ff2b29f78ee5f9fb15447fc71ae7bf9fea9379")
            scheme:add("versions", "4.1.4",  "8c31aabdf2223a7bb5759209ada56a9a72c6a1c605c221f23967130d1989e171")
            scheme:add("versions", "4.2.1",  "dfc2b2afac257555e3b9ce375b12b2883964283a366c17fec96cf4d17e4f1677")
            return true
        elseif os.arch() == "x86" then
            scheme:add("urls", "https://cmake.org/files/v$(version).zip", {excludes = {"*/doc/*"}, version = function (version)
                    return table.concat(table.slice((version):split('%.'), 1, 2), '.') .. "/cmake-" .. version .. (version:ge("3.20") and "-windows-i386" or "-win32-x86")
                end})
            scheme:add("urls", "https://github.com/Kitware/CMake/releases/download/v$(version).zip", {excludes = {"*/doc/*"}, version = function (version)
                    return version .. "/cmake-" .. version .. (version:ge("3.20") and "-windows-i386" or "-win32-x86")
                end})
            scheme:add("versions", "3.11.4", "b068001ff879f86e704977c50a8c5917e4b4406c66242366dba2674abe316579")
            scheme:add("versions", "3.15.4", "19c2bfd26c4de4d8046dd5ad6de95b57a2556559ec81b13b94e63ea4ae49b3f2")
            scheme:add("versions", "3.18.4", "4c519051853686927f87df99669ada3ff15a3086535a7131892febd7c6e2f122")
            scheme:add("versions", "3.21.0", "11ee86b7f9799724fc16664c63e308bfe3fbc22c9df8ef4955ad4b248f3e680b")
            scheme:add("versions", "3.22.1", "f53494e3b35e5a1177ad55c28763eb5bb45772c1d80778c0f96c45ce4376b6e8")
            scheme:add("versions", "3.24.1", "a0b894e2a814d2353f1e581eb6ca3c878a39c071624495729dbcf9978e1579f2")
            scheme:add("versions", "3.24.2", "52f174dc7f52a9c496c7a49ee35456466c07c8ce29aa2092f4b4536ce5d7ed57")
            scheme:add("versions", "3.26.4", "342ca44f494985f8ef43676eb8a0404b2c68321036e28aa221ceab51d377b158")
            scheme:add("versions", "3.28.1", "e9591cfdb1d394eee84acdecf880cbd91cf0707dfd0d58bf3796b88475f46cb9")
            scheme:add("versions", "3.28.3", "411812b6b29ac793faf69bdbd36c612f72659363c5491b9f0a478915db3fc58c")
            scheme:add("versions", "3.29.2", "e51b281c9dfd1498834729b33bf49fc668ad1dadbc2eaba7b693d0f7d748450d")
            scheme:add("versions", "3.30.1", "f5fb1d93b82e9a5fbd5853d4b17a130605f0b4ed13a655d1371c2d6d55f9261d")
            scheme:add("versions", "3.30.2", "d01f7ea52097dd58aa225884b1ecc543827e9ef99d36dac2898609a0d5e60eb6")
            scheme:add("versions", "4.0.0",  "28408c0ca3b4461550bbcad94c526846699ed79366d81b57db0375cb119875dd")
            scheme:add("versions", "4.0.1",  "9174c1f0b519418436eb37c9b419aff40a8b12e12feee649abf04826544f2cdd")
            scheme:add("versions", "4.0.2",  "026009a57d06cb8342e42840fcbd83bc5e58ee3ea90d3ddc8e46f82a0d93d9ff")
            scheme:add("versions", "4.0.3",  "9f71df30cf0194f7214d135afb277017bd4a58baba2ae14e6ae8b0533b5a3dbf")
            scheme:add("versions", "4.1.4",  "661f09c60febe401a73de7abd5030332973d44a6d163e22bba0866a7d90116c9")
            scheme:add("versions", "4.2.1",  "696129556482da90293f9d64c1fa68dbe06b0ede80331d7da9aaa03aada6aecf")
            return true
        elseif os.arch() == "arm64" then
            scheme:add("urls", "https://cmake.org/files/v$(version).zip", {excludes = {"*/doc/*"}, version = function (version)
                    return table.concat(table.slice((version):split('%.'), 1, 2), '.') .. "/cmake-" .. version .. "-windows-arm64"
                end})
            scheme:add("urls", "https://github.com/Kitware/CMake/releases/download/v$(version).zip", {excludes = {"*/doc/*"}, version = function (version)
                    return version .. "/cmake-" .. version .. "-windows-arm64"
                end})
            scheme:add("versions", "3.28.1", "a839b8d32c11b24f078142b5b8c3361a955ebc65788f0f0353b2121fe2f74e49")
            scheme:add("versions", "3.28.3", "cfe023b7e82812ef802fb1ec619f6cfa2fdcb58ee61165fc315086286fe9cdcc")
            scheme:add("versions", "3.29.2", "5b16a0db4966c04582c40131038de49d5b0161fcd950dc9e955753dfab858882")
            scheme:add("versions", "3.30.1", "02b433f70aa549449be2d53046d0179590bf3b6290d9fda3fbbb23f96a4f2802")
            scheme:add("versions", "3.30.2", "c0cef52e8f60eb1c3058f8bc0b3803c27d79f066b7d7d94f46a2c689bbd36f22")
            scheme:add("versions", "4.0.0",  "6a24f1ea0965a10a2508b16db1ec8b62c83d5323ac33a1aa7d201797ba147302")
            scheme:add("versions", "4.0.1",  "3de43c9c826349bba61eef04de90c12c2ad8632b0e0af31c57145f6da69898fb")
            scheme:add("versions", "4.0.2",  "634d6bab01a639e314f4fb2fee0967c84c3a37e39b9b2c9455c2dff2deb6a6dc")
            scheme:add("versions", "4.0.3",  "86ccd6485bbd4bb41a1a858db397be5bca5e0de96858bf8dbba7a64407bd6c00")
            scheme:add("versions", "4.1.4",  "82967cb4f33bd56c0d3dbceb13aa887156deac31f5b3a3db07bdfa96b11a7229")
            scheme:add("versions", "4.2.1",  "96b097ca3a019cd62839d4805958ad0163dd1adedcfbe578730d57c098aaf667")
            return true
        end
    end
end

function install(package)
    if is_host("macosx") then
        os.cp("CMake.app/Contents/bin", package:installdir())
        os.cp("CMake.app/Contents/share", package:installdir())
    else
        os.cp("bin", package:installdir())
        os.cp("share", package:installdir())
    end
end
